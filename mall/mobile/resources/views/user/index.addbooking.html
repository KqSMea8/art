{include file="page_header"}
		<div class="con">
			<form action="{url('add_booking')}" method="post" onsubmit="return addBooking();">
			<div class="user-recharge b-color-f">
				<section class="m-top1px margin-lr">
					<div class="text-all dis-box j-text-all">
						<div class="box-flex input-text f-05">
							{$info.goods_name}
						</div>
					</div>
				</section>
				<section class="m-top1px margin-lr">
					<div class="text-all dis-box j-text-all">
						<label class="t-remark">订购数量</label>
						<div class="box-flex input-text">
							<input class="j-input-text" id="number" type="text" name="number" value="{$info.goods_number}">
						</div>
					</div>
				</section>
				<section class="m-top1px padding-tb margin-lr" style="padding-bottom:0;">
					<div class="f-c-select-msg">
						<label class="t-remark">订购描述<span class="t-remark">（50字）</span></label>
						<div class="text-area1 m-top04">
							<textarea class="text-area1"  id="desc" maxlength="50" name="desc" placeholder="选填">{$goods_attr}{$info.goods_desc}</textarea>
							<span id="remark_num">50</span>
						</div>
					</div>
				</section>
				<section class="m-top1px margin-lr">
					<div class="text-all dis-box j-text-all">
						<label class="t-remark">联系人:</label>
						<div class="box-flex input-text">
							<input class="j-input-text" id="linkman" type="text" name="linkman" value="{$info.consignee}">
						</div>
					</div>
				</section>
				<section class="m-top1px margin-lr">
					<div class="text-all dis-box j-text-all">
						<label class="t-remark">邮箱地址:</label>
						<div class="box-flex input-text">
							<input class="j-input-text" id="email" type="text" name="{$info.email}">
						</div>
					</div>
				</section>
				<section class="m-top1px margin-lr">
					<div class="text-all dis-box j-text-all">
						<label class="t-remark">联系电话:</label>
						<div class="box-flex input-text">
							<input class="j-input-text" id="tel" type="text" name="tel" value="{$info.tel}">
						</div>
					</div>
				</section>
			</div>
			<div class="dis-box filter-btn">
				<input id="id" name="id" type="hidden" value="{$info.id}" />
		        <input name="rec_id" type="hidden" value="{$info.rec_id}" />
				<button type="submit" class="btn-submit box-flex">提交缺货登记</button>
				<button type="reset" class="btn-reset box-flex btn-clear">重置</button>
			</div>
			</form>
     <!--快捷导航-->
    {include file="float_nav"} 
    {include file="float_nav_footer"}
		</div>
		<script type="text/javascript">
			$(function($) {
				$('.btn-clear').click(function(){
					$('input,textarea').val("");
					$('#remark_num').html("50");
					$('#id').val("{$info.id}");
				});
			});


			/*******************************************************************************
			 * 处理会员提交的缺货登记
			 */
			function addBooking() {
				var number = $('#number').val();
				var desc = $('#desc').val();
				var linkman = $('#linkman').val();
				var email = $('#email').val();
				var tel = $('#tel').val();
				var msg = "";

				if (number.length == 0) {
					msg += "订购数量不能为空!<br />" + "\n";
				} else {
					var reg = /^[1-9][0-9]?$/;
					if (!reg.test(number)) {
						msg += "订购数量只能是1-30!<br />" + "\n";
					}else if(number>30){
						msg += "订购数量不能超过30!<br />" + "\n";
					}
				}

				if (linkman.length == 0) {
					msg += "联系人不能为空!<br />" + "\n";
				}

				if (tel.length == 0) {
					msg += "联系电话不能为空!<br />" + "\n";
				}else {
					var reg = /^[\d|\-|\s|\_]+$/; //只允许使用数字-空格等
					if (!reg.test(tel)) {
						msg += "联系电话格式不正确!<br />" + "\n";
					}
				}

				if (email.length == 0) {
					msg += "邮箱不能为空!<br />" + "\n";
				} else {
					var reg = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
					if (!reg.test(email)) {
						msg += "邮箱格式不正确!<br />" + "\n";
					}
				}


				if (msg.length > 0) {
					d_messages(msg, 2);
					return false;
				}

				return true;
			}


		</script>
	</body>

</html>