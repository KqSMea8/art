var vmAuth = new Vue({
  el: '#app',
  data: {
    errorTip: '',
    ruleForm: {
      name: '',
      idCardNo: '',
      motto: '',
      resume: '',
      memo: ''
    },
    isSubmit: false,
    rules: {
      name: [{
        required: true,
        message: '请输入您的真实姓名',
        trigger: 'blur'
      }, {
        pattern: validInfo.notEmply,
        message: '请输入您的真实姓名',
        trigger: 'blur'
      }],
      idCardNo: [{
        required: true,
        message: '请输入您的身份证号码',
        trigger: 'blur'
      }, {
        pattern: validInfo.idCardNo,
        message: '身份证号码格式错误',
        trigger: 'blur'
      }],
      motto: [{
        required: true,
        message: '请输入您的个性签名',
        trigger: 'blur'
      }, {
        pattern: validInfo.notEmply,
        message: '请输入您的个性签名',
        trigger: 'blur'
      }],
      resume: [{
        required: true,
        message: '请输入您的个人履历',
        trigger: 'blur'
      }, {
        pattern: validInfo.notEmply,
        message: '请输入您的个人履历',
        trigger: 'blur'
      }],
      memo: [{
        required: true,
        message: '请输入您的个人信息',
        trigger: 'blur'
      }, {
        pattern: validInfo.notEmply,
        message: '请输入您的个人信息',
        trigger: 'blur'
      }]
    }
  },
  methods: {
    submitForm: function (formName) {
      var that = this;
      this.$refs[formName].validate((valid) => {
        if (valid) {
          //避免重复点击提交
          if (this.isSubmit) {
            return false;
          }
          this.isSubmit = true;
          this.errorTip = "提交中，请稍后";
          var formData = this.ruleForm;
          for (var prop in formData) {
            formData[prop] = trimStr(formData[prop]);
          }

          artzheAgent.call('UserCenter/applyArtistStepTwo',formData,function(res) {
            that.isSubmit = false;
            console.log(res);
            if (res.code == 30000) {
              window.location.href = '/home/auth/third';
            }
          });
        } else {
          console.log('error submit!!');
          return false;
        }
      });
    },
    goToThird: function () {
      window.location.href = '/home/auth/third';
    }
  }
});