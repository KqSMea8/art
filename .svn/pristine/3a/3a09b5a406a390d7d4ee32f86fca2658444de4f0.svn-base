<?php

namespace V51\Logic;

use V51\Base\BaseLogic;


class ArticleLogic extends BaseLogic
{

    public static function replaceHtmlImgSrc($find,$content){
        foreach ($find as $key => $value) {
            if (strpos($value, 'x-oss-process=') === false) { //已经压缩了的图片，不再添加压缩参数
                $content = str_replace($value, $value . '?x-oss-process=image/resize,m_fixed,w_702,q=50,image/format,jpg', $content);
            }
        }
        return $content;
    }
    public static function getHtmlImgSrc($content){
        $match = [];
       //preg_match_all('/(img.*?src="(.*?)")/',$content,$match);
       preg_match_all('/<img.*?src="(.*?)".*?>/',$content,$match);

        return array_unique($match[1]);
    }
}
